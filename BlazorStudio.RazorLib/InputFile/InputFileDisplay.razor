@using BlazorALaCarte.Shared.Resize

<div class="bstudio_input-file-display">
    @if (HeaderRenderFragment is not null)
    {
        @HeaderRenderFragment(_selectedAbsoluteFilePath)
    }
    
    <CascadingValue Name="SetInputFileContentTreeViewRoot" Value="SetInputFileContentTreeViewRoot">
        <InputFileTopNavBar />
        
        <div class="bstudio_input-file-display-body @BodyClassCssString"
             style="@BodyStyleCssString">

            <InputFileSidebar ElementDimensions="_navMenuElementDimensions"
                              SetSelectedAbsoluteFilePath="tvm => _selectedAbsoluteFilePath = tvm"
                              />

            <ResizableColumn LeftElementDimensions="_navMenuElementDimensions"
                             RightElementDimensions="_contentElementDimensions"
                             ReRenderFuncAsync="() => InvokeAsync(StateHasChanged)"/>

            <InputFileContent ElementDimensions="_contentElementDimensions"
                              SetSelectedAbsoluteFilePath="tvm => _selectedAbsoluteFilePath = tvm" />
        </div>
        
        <InputFileBottomControls />
    </CascadingValue>

    @if (FooterRenderFragment is not null)
    {
        @FooterRenderFragment(_selectedAbsoluteFilePath)
    }
</div>