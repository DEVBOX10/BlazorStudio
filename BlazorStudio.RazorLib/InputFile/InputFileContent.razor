@using BlazorStudio.RazorLib.TreeView
@using BlazorStudio.RazorLib.Menu

@inherits Fluxor.Blazor.Web.Components.FluxorComponent

<div class="bstudio_input-file-display-content"
     style="@ElementDimensions.StyleString">
    
    @{
        var selectionSafeReference = SelectionMutablyReferenced;
        
        <TreeViewDisplay TreeViewModel="selectionSafeReference"
                         ShouldShowRoot="false"
                         TreeViewDisplayOnEventRegistration="_treeViewDisplayOnEventRegistration">
            <ItemRenderFragment Context="treeViewModel">
                @treeViewModel.Item.FilenameWithExtension
            </ItemRenderFragment>
    
            <ContextMenuEventRenderFragment Context="contextMenuEvent">
                <div class="bstudio_dropdown-display-default-background"
                     style="@GetStyleForContextMenu(contextMenuEvent.CapturedMouseEventArgs)">
                    <MenuDisplay MenuRecord="GetContextMenu(contextMenuEvent.TreeViewModel)"/>
                </div>
            </ContextMenuEventRenderFragment>
        </TreeViewDisplay>
    }
</div>